!function(n){var e=Array.prototype.indexOf||function(n){for(var e=0,t=this.length;t>e;e++)if(e in this&&this[e]===n)return e;return-1},t=$.husl,r=function(e,r){var a,u,o,i,l,c,s=function(n){a=n;var e=t._conv.rgb.lch([a,u,o]);i=e[2],l=e[1],c=e[0]},h=function(n){u=n;var e=t._conv.rgb.lch([a,u,o]);i=e[2],l=e[1],c=e[0]},p=function(n){o=n;var e=t._conv.rgb.lch([a,u,o]);i=e[2],l=e[1],c=e[0]},f=function(n){i=n;var e=t._maxChromaForLH(c,i);l>e&&(l=e);var r=t._conv.lch.rgb([c,l,i]);a=r[0],u=r[1],o=r[2]},g=function(n){l=n;var e=t._maxChromaForLH(c,i);l>e&&(l=e);var r=t._conv.lch.rgb([c,l,i]);a=r[0],u=r[1],o=r[2]},v=function(n){c=n;var e=t._maxChromaForLH(c,i);l>e&&(l=e);var r=t._conv.lch.rgb([c,l,i]);a=r[0],u=r[1],o=r[2]};Object.defineProperties(this,{r:{get:function(){return a},set:s},g:{get:function(){return u},set:h},b:{get:function(){return o},set:p},h:{get:function(){return i},set:f},s:{get:function(){return l},set:g},l:{get:function(){return c},set:v},hex:{get:function(){return t._conv.rgb.hex([a,u,o])},set:function(){}}}),e&&(this.h=e.h,this.s=e.s,this.l=e.l),r&&(r.h!==n&&(this.h=r.h),r.s!==n&&(this.s=r.s),r.l!==n&&(this.l=r.l),r.r!==n&&(this.r=r.r),r.g!==n&&(this.g=r.g),r.b!==n&&(this.b=r.b))},a=function(n,e){if("br"===n)return document.createElement("br");var t=arguments,r=t.length,a,u=1,o=document.createElement(n);if(e&&e.constructor===Object)for(a in e)o.setAttribute(a,e[a]),u=2;for(;r>u;u++)o.appendChild(t[u]);return o},u=Math,o=u.cos,i=u.sin,l=u.sqrt,c=u.abs,s=u.round,h=u.atan2,p=u.min,f=u.max,g=u.atan,v=Math.PI,x=function M(n,e,t,r){return l(c((n-t)*(n-t))+c((e-r)*(e-r)))},b=function F(n,e,t,r){return 180*h(r-e,t-n)/v},d=function N(n,e,t,r){return h(r-e,t-n)},w=function(n){return(n+2*Math.PI)%(2*Math.PI)},m=function(n,e,t,r){var a,u;return a=(n-t)/(r-e),u=n+a*e,[a,u]},y=function(n,e){return m(n[0],n[1],e[0],e[1])},I=function(n,e){var t,r;return r=[0,e[1]/e[0]],t=y(n,r),t[0]>0&&t[0]<e[0]?!0:t[0]<0&&t[0]>e[0]},H=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))},C=function(n,e){var t,r="linear-gradient(90deg";for(t=0;10>t;t++)r+=","+n(t)+" "+100*t/e+"%";return r+=")"},L=function(n){var e,t,r;r=n.length;var a=[];for(e=0;r>e;e++)for(t=e+1;r>t;t++)a.push([n[e],n[t]]);return a},k=function(n,t){return e.call(n,t)>=0},R=function(n){var e=$.husl._getBounds(n),t=function(n){return[n[1],n[0]]};return[["R0",t(e[0])],["R1",t(e[1])],["G0",t(e[2])],["G1",t(e[3])],["B0",t(e[4])],["B1",t(e[5])]]},B=function(n){var e=R(n),t=L(e);return t.map(function(n){return{names:[n[0][0],n[1][0]],point:y(n[0][1],n[1][1])}}).filter(function(n){return e.every(function(e){var t=e[0],r=e[1];return k(n.names,t)||!I(r,n.point)})})},S=function(n,e,t){return f(e,p(t,n))},G=function(n){n=S(n,.001,99.999);var e=B(n).map(function(n){return H(n.point)}),t=_.max(e);return 200/t};$.fn.couleur=function(n){var e={picker:$(this),halo:a("canvas",{"class":"couleur-wheel-halo",height:"50",width:"50"}),wheel:a("canvas",{"class":"couleur-wheel",height:"50",width:"50"}),cursor:a("div",{"class":"couleur-wheel-cursor"})};e.picker.addClass("couleur"),e.wheelWrap=a("div",{"class":"couleur-wheel-wrap"},e.halo,e.wheel,e.cursor),[{channel:"h",range:"359"},{channel:"s",range:"100"},{channel:"l",range:"100"},{channel:"r",range:"255"},{channel:"g",range:"255"},{channel:"b",range:"255"}].forEach(function(n){e["label"+n.channel.toUpperCase()]=a("label",{"class":"couleur-label couleur-label-"+n.channel}),e["input"+n.channel.toUpperCase()]=a("input",{type:"text",value:"100","class":"couleur-input-"+n.channel}),e["range"+n.channel.toUpperCase()+"Input"]=a("input",{type:"range",min:"0",max:n.range,step:"1","class":"couleur-range-"+n.channel+"-input"}),e["range"+n.channel.toUpperCase()]=a("div",{"class":"couleur-range-wrap couleur-range-"+n.channel},e["range"+n.channel.toUpperCase()+"Input"])});var u=a("div",{"class":"couleur-input-group"},e.labelH,e.inputH,e.rangeH,e.labelS,e.inputS,e.rangeS,e.labelL,e.inputL,e.rangeL),l=a("div",{"class":"couleur-input-group"},e.labelR,e.inputR,e.rangeR,e.labelG,e.inputG,e.rangeG,e.labelB,e.inputB,e.rangeB);e.inputHex=a("input",{type:"text",value:"#ffffff","class":"couleur-input-hex"}),e.picker.append([e.wheelWrap,u,a("div",{"class":"couleur-spacer"}),l,a("div",{"class":"couleur-spacer"}),e.inputHex]);var c=e.wheel.getContext("2d"),h=e.halo.getContext("2d"),g=0|$(e.wheel).width(),v=new r;v.l=50;var x,d=0,w=0,m=!0,y=function(){var n=v.l>50;n!==m&&(m=n,$(e.cursor).css("color",n?"#000":"inherit"))},I=function(){$(e.cursor).css("transform","translate3d("+(d*(g/2)+g/2)+"px,"+(w*(g/2)+g/2)+"px,0)"),y();var a=v.hex;n(a,[f(v.r,0),f(v.g,0),f(v.b,0)]),e.rangeH.style.background=C(function(n){return new r(v,{h:36*n}).hex},10),e.rangeS.style.background=C(function(n){return new r(v,{s:10*n}).hex},10),e.rangeL.style.background=C(function(n){return new r(v,{l:10*n}).hex},10),e.rangeR.style.background=C(function(n){return new r(v,{r:n/10}).hex},10),e.rangeG.style.background=C(function(n){return new r(v,{g:n/10}).hex},10),e.rangeB.style.background=C(function(n){return new r(v,{b:n/10}).hex},10);var u=new r;u.h=v.h,u.s=180,u.l=60;var o=new r;o.h=(v.h+180)%360,o.s=180,o.l=60,e.labelH.style.background="linear-gradient("+u.hex+" 0,"+u.hex+" 3px ,transparent 3px,transparent 4px,"+o.hex+" 4px,"+o.hex+" 7px)",e.labelS.style.background="linear-gradient("+u.hex+" 0,"+u.hex+" 3px ,transparent 3px,transparent 4px,#919191 4px,#919191 7px)",e.labelL.style.background="linear-gradient("+u.hex+" 0,"+u.hex+" 3px ,transparent 3px,transparent 4px,#ffffff 4px,#ffffff 7px)";var i=s(255*v.r);e.rangeRInput.value=i,e.inputR.value=i;var l=s(255*v.g);e.rangeGInput.value=l,e.inputG.value=l;var c=s(255*v.b);e.rangeBInput.value=c,e.inputB.value=c;var h=t._maxChromaForLH(v.l,v.h);e.rangeLInput.value=v.l,e.inputL.value=s(v.l),e.rangeSInput.value=v.s/h*100,e.inputS.value=s(v.s/h*100),e.rangeHInput.value=(v.h+360)%360,e.inputH.value=s((v.h+360)%360),e.inputHex.value=a},L=function(){v.h=b(0,0,d/x*200,w/x*200),v.s=H([d/x*200,w/x*200]),I()},_=function(){d=v.s*o(v.h*Math.PI/180)*x/200,w=v.s*i(v.h*Math.PI/180)*x/200,I()};$(e.rangeLInput,e.inputL).on("input",function(){v.l=Number($(this).val())||0,x=G(v.l),L(),F()}),$(e.rangeSInput,e.inputS).on("input",function(){var n=t._maxChromaForLH(v.l,v.h);v.s=n*((Number($(this).val())||0)/100),_()}),$(e.rangeHInput,e.inputH).on("input",function(){v.h=Number($(this).val())||0,_()}),$(e.rangeRInput,e.inputR).on("input",function(){v.r=(Number($(this).val())||0)/255,x=G(v.l),_(),F()}),$(e.rangeGInput,e.inputG).on("input",function(){v.g=(Number($(this).val())||0)/255,x=G(v.l),_(),F()}),$(e.rangeBInput,e.inputB).on("input",function(){v.b=(Number($(this).val())||0)/255,x=G(v.l),_(),F()});var k=!1;$(window).on("mousedown",function(){k=!0}),$(window).on("mouseup",function(){k=!1}),$(e.wheel).on("mousemove",function(n){k&&(d=(n.pageX-$(this).offset().left-g/2)/(g/2),w=(n.pageY-$(this).offset().top-g/2)/(g/2),L())}),$(e.wheel).on("mousedown",function(n){d=(n.pageX-$(this).offset().left-g/2)/(g/2),w=(n.pageY-$(this).offset().top-g/2)/(g/2),L()});var R=function(n,e){var t=G(10),a=new r;return a.l=10,a.s=H([(n-25)/(t/8),(e-25)/(t/8)]),a.h=(b(0,0,(n-25)/(t/8),(e-25)/(t/8))+180)%360,h.fillStyle=a.hex,h.fillRect(n,e,1,1)},B=function(n,e){var t=new r;return t.l=v.l,t.s=H([(n-25)/(x/8),(e-25)/(x/8)]),t.h=b(0,0,(n-25)/(x/8),(e-25)/(x/8)),c.fillStyle=t.hex,c.fillRect(n,e,1,1)},S=function(){for(var n=50,e=0;n*n>e;e++)R(e%n,e/n|0)};S();var M=!1,F=function(){M===!1&&(M=!0,window.requestAnimationFrame(function(){for(var n=50,t=0;n*n>t;t++)B(t%n,t/n|0);e.halo.style.opacity=p(v.l/50,1),M=!1}))};x=G(v.l),L(),window.requestAnimationFrame(function(){g=0|$(e.wheel).width(),L()}),F()}}();